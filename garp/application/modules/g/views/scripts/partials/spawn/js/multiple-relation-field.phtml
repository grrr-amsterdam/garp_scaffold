<?php
	$params = array(
		"xtype: 'relationpanel'",
		"model: '{$this->relation->model}'",
		"tabTip: __('{$this->relation->label}')"
	);
	
	if (!$this->relation->editable):
		$params[] = "minimalUI: true";
	endif;
	
	if ($this->relation->limit):
		$params[] = "maxItems: '{$this->relation->limit}'";
	endif;

	switch ($this->relation->type):
		case 'hasMany':
			$params[] = "rule: '{$this->relation->oppositeRule}'";
			$params[] = "title: __('{$this->relation->label}')";
			$params[] = "quickCreateBtnLabel: '{$this->relation->label}'";
		break;
		case 'hasAndBelongsToMany':
			$isHomo 			= $this->relation->model === $this->modelId;
			$hasConflictingName = $this->relation->name === $this->modelId;
			$isCustomNamed		= $this->relation->name !== $this->relation->model;

			if ($hasConflictingName):
				$params[] = "rule: '{$this->relation->name}1'";
				$params[] = "rule2: '{$this->relation->name}2'";
			else:
				$oppositeRule = $isCustomNamed
					? $this->relation->model
					: $this->relation->oppositeRule
				;
				$params[] = "rule: '{$oppositeRule}'";
				$params[] = "rule2: '{$this->relation->name}'";
			endif;

			if ($isHomo && !$this->relation->inverse):
				$params[] = "bidirectional: false";
			endif;

			$bindingModel = $this->relation->getBindingModel();
			$params[] = "bindingModel: '{$bindingModel->id}'";
			$params[] = "title: __('{$this->relation->label}')";
			$params[] = "quickCreateBtnLabel: '{$this->relation->label}'";
		break;
		default:
			$params[] = "rule: '{$this->relation->name}'";
	endswitch;


	if ($this->relation->type !== 'hasAndBelongsToMany'):
		$params[] = "quickCreateReference: '{$this->relation->column}'";
	endif;

	if ($this->relation->weighable):
		$params[] = "weighable: true";
	endif;
?>
		<?php echo implode(",\n\t\t", $params) ?>
